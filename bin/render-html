#!/bin/bash

set -euo pipefail

## This script needs the environment variables SHORTSHA, FULLSHA, and UPDATED to be externally set;
## we cannot set them here in this script because to do so weâ€™d need to run git, and git is not
## installed on the Pandoc container image that we use for our CD job that invokes this script.

sed -e "s/\\\$shortsha\\\$/$SHORTSHA/g" \
    -e "s/\\\$fullsha\\\$/$FULLSHA/g" \
    -e "s/\\\$updated\\\$/$UPDATED/g" \
    resume.md \
  | pandoc --from markdown \
           --to 'html5' \
           --standalone \
           --css='' \
  > public/resume/index.html
